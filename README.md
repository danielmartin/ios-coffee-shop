ios-coffee-shop
===============

iOS Coffee Shop is a fun name for a set of Bash scripts that automatizes the process of building an .ipa file from a repository project. It is aimed at development teams that need to generate daily builds of an iOS app without user intervention. The name is inspired by the unwritten tradition of compiling daily builds when the developers go to lunch, so when they are back to work a hot "cup of coffee" is waiting for them.

The main script is coffee_shop.sh. The syntax is as follows:

	./coffee_shop [-v version] 
				  [-p provisioning_profile] 
				  [-c developer_certificate] 
				  [-s sdk]
				  [-r] [-b] [-g] [-l] [-a] 
				  [-e project_name]
				  [-d product_name] 
				  [-o output_dir] REPO_URI


- The -v option sets a particular version in the project file before compilation is performed.
- The -p option specifies a mobile provisioning profile. See more information [here](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/CreatingandDownloadingDevelopmentProvisioningProfiles/CreatingandDownloadingDevelopmentProvisioningProfiles.html)
- The -c option specifies a developer certificate to sign the app.
- The -s option provides the iOS SDK version you want to use to compile the project. You can get a list of the available OSX/iOS SDKs by running this command: `xcodebuild -showsdks`
- The -r option builds a Release version of the app.
- The -b option specifies that the repository is SVN (this is the default).
- The -g option specifies that the repository is Git.
- The -l option performs a validation step after the .ipa is built.
- The -a option archives the compiled project to the ~/archived_builds folder. An archived build lets the developer symbolicate crash logs generated by a particular version of the app.
- The -e option specifies the name of the .xcodeproj project file you want to compile, for the case where there are more than one. You need to type the project name *without* the .xcodeproj extension because it'll be automatically added for you.
- The -d option lets you specify a name for the .ipa file. If not specified, the project name will be used. In the case of debug versions, the version number and date/time information will be automatically appended.
- REPO_URI is the URL of the repository. You need read access to this repository.

 If no optional arguments are provided, iOS Coffee Shop assumes you want to build a Debug version, the URI is an SVN repo, the SDK is "iphoneos" (i.e. the latest SDK for targetting a physical device), and the destination directory is the current directory.
  
Requirements
------------

In order to use these scripts you need an Intel-based Macintosh computer with Xcode installed. You also need access to the SVN or Git client command line tools. In recent versions of OS X, the SVN client is installed with Xcode command line tools (*Xcode*, *Preferences*, *Downloads* tab). Git is available at http://git-scm.com/

If you aim to target a physical device, your computer must have a development certificate associated with a valid iOS developer account, and a mobile provisioning profile.

Usage Example
-------------
The following example downloads an iOS project from an SVN repo, sets it to version 1.0, and code signs it using the "John Smith" developer identity. (Private and public keys must be installed on the build machine for this to work.)

	./coffee_shop.sh -v 1.0 -c "iPhone Developer: John Smith" -s iphoneos -e <Project_Name> -o <Destination_Path> <Repo_URL>

Future work
-----------

- Support other repositories (Mercurial, CVSâ€¦)
- More flexibility to ensure it is useful to a wide range of projects.
- Run application/logic tests before building the .ipa